<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Conclusion / Write Up | RTI Take Home Assignment</title>
  <meta name="description" content="Chapter 5 Conclusion / Write Up | RTI Take Home Assignment" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Conclusion / Write Up | RTI Take Home Assignment" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Conclusion / Write Up | RTI Take Home Assignment" />
  
  
  

<meta name="author" content="Louise Lindegaard" />


<meta name="date" content="2022-02-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="create-xgboost.html"/>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">RTI Interview</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> SQL Data Consolidation</a></li>
<li class="chapter" data-level="2" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html"><i class="fa fa-check"></i><b>2</b> Variable Cleaning and Formating</a>
<ul>
<li class="chapter" data-level="2.1" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#import-data-and-libraries-into-r"><i class="fa fa-check"></i><b>2.1</b> Import data and libraries into R</a></li>
<li class="chapter" data-level="2.2" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#data-cleaning"><i class="fa fa-check"></i><b>2.2</b> Data Cleaning</a></li>
<li class="chapter" data-level="2.3" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#variable-binning"><i class="fa fa-check"></i><b>2.3</b> Variable binning</a></li>
<li class="chapter" data-level="2.4" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#check-for-quasi-complete-separation"><i class="fa fa-check"></i><b>2.4</b> Check for Quasi Complete Separation</a></li>
<li class="chapter" data-level="2.5" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#split-data-into-training-validation-and-test"><i class="fa fa-check"></i><b>2.5</b> Split data into training, validation and test</a></li>
<li class="chapter" data-level="2.6" data-path="variable-cleaning-and-formating.html"><a href="variable-cleaning-and-formating.html#exploratory-statistics-on-training-data"><i class="fa fa-check"></i><b>2.6</b> Exploratory Statistics on Training Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html"><i class="fa fa-check"></i><b>3</b> Develop Logistic Regression Model</a>
<ul>
<li class="chapter" data-level="3.1" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html#check-for-issues-with-multi-collinearity"><i class="fa fa-check"></i><b>3.1</b> Check for issues with multi-collinearity</a></li>
<li class="chapter" data-level="3.2" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html#variable-selection"><i class="fa fa-check"></i><b>3.2</b> Variable Selection</a></li>
<li class="chapter" data-level="3.3" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html#create-logistic-regression"><i class="fa fa-check"></i><b>3.3</b> Create Logistic Regression</a></li>
<li class="chapter" data-level="3.4" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html#evaluate-logistic-regression"><i class="fa fa-check"></i><b>3.4</b> Evaluate logistic regression</a></li>
<li class="chapter" data-level="3.5" data-path="develop-logistic-regression-model.html"><a href="develop-logistic-regression-model.html#test-training-cut-off-on-validation"><i class="fa fa-check"></i><b>3.5</b> Test training cut off on validation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="create-xgboost.html"><a href="create-xgboost.html"><i class="fa fa-check"></i><b>4</b> Create XGBoost</a>
<ul>
<li class="chapter" data-level="4.1" data-path="create-xgboost.html"><a href="create-xgboost.html#tuning-an-xgboost-nrounds-parameter---11-was-lowest"><i class="fa fa-check"></i><b>4.1</b> Tuning an XGBoost nrounds parameter - 11 was lowest</a></li>
<li class="chapter" data-level="4.2" data-path="create-xgboost.html"><a href="create-xgboost.html#tuning-through-caret"><i class="fa fa-check"></i><b>4.2</b> Tuning through caret</a></li>
<li class="chapter" data-level="4.3" data-path="create-xgboost.html"><a href="create-xgboost.html#variable-importance"><i class="fa fa-check"></i><b>4.3</b> Variable importance</a></li>
<li class="chapter" data-level="4.4" data-path="create-xgboost.html"><a href="create-xgboost.html#roc-curve-and-auc"><i class="fa fa-check"></i><b>4.4</b> ROC Curve and AUC</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusion-write-up.html"><a href="conclusion-write-up.html"><i class="fa fa-check"></i><b>5</b> Conclusion / Write Up</a>
<ul>
<li class="chapter" data-level="5.1" data-path="conclusion-write-up.html"><a href="conclusion-write-up.html#figure-1"><i class="fa fa-check"></i><b>5.1</b> Figure 1</a></li>
<li class="chapter" data-level="5.2" data-path="conclusion-write-up.html"><a href="conclusion-write-up.html#final-auroc-chart"><i class="fa fa-check"></i><b>5.2</b> Final AUROC Chart</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">RTI Take Home Assignment</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conclusion-write-up" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Conclusion / Write Up</h1>
<p>Overview
The goal of this project is to develop a model that predicts whether individuals, based on census variables, make over $50,000/year. I compared the predictive power of a logistic regression to an XGBoost model using the area under the ROC curve (AUROC). This statistic calculates each models ability to distinguish between people who make above $50,000/year from those who do not. The logistic regression model resulted in the higher AUROC, and was able to better predict who is likely to make above $50,000/year from census data. The final AUROC on the test data was 0.894.</p>
<p>Methodology
The first two steps were exploring each variable individually and binning continuous variables into categories. Each variable was then tested for quasi-complete separation. This is a problem when a subgroup of the predictor variable perfectly predicts the target variable outcome. Each subgroup with less than 5 observations was collapsed into a new, larger group. The data was split into a 70/20/10 training/validation/test split and each variable was tested for multi-collinearity to ensure no two variables are providing the same information in the model. Stepwise selection was used to identify which variables were important in predicting the target. The 13 important variables were then used in a forward selection process to identify any predictive interactions. For example, the selection process identified changes in the target variables relationship with hours worked each week when looking at different occupations. A logistic regression was built using these variables. The XGBoost was tuned and built using all census variables, and the most important variables were calculated using a gain statistic.</p>
<p>Results
A simple relationship between marital status and people who make over 50k can be pictured in Figure 1. This figure shows the large majority of people who make over 50k are married to civil spouses. In our census data, 85% of people who make over 50k are married to a civil spouse compared to only 33% of those who do not make over 50k. Furthermore, the XGBoost model found marital status to be the most important variable in predicting the target.</p>
<p>The logistic regression was able to better predict people who make over $50,000/year using census variables. I recommend using a logistic regression moving forward to best predict the individuals that make over 50K using census data. Given more time for tuning, you might be able to challenge the predictive power using a future XGBoost model.</p>
<div id="figure-1" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Figure 1</h2>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="conclusion-write-up.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add color blind palette</span></span>
<span id="cb48-2"><a href="conclusion-write-up.html#cb48-2" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>, <span class="st">&quot;#009E73&quot;</span>, <span class="st">&quot;#F0E442&quot;</span>, <span class="st">&quot;#D55E00&quot;</span>, <span class="st">&quot;#CC79A7&quot;</span>)</span>
<span id="cb48-3"><a href="conclusion-write-up.html#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="conclusion-write-up.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot data</span></span>
<span id="cb48-5"><a href="conclusion-write-up.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train) <span class="sc">+</span></span>
<span id="cb48-6"><a href="conclusion-write-up.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> over_50k, <span class="at">fill =</span> marital_status, <span class="at">color =</span>)) <span class="sc">+</span></span>
<span id="cb48-7"><a href="conclusion-write-up.html#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span>cbPalette) <span class="sc">+</span> </span>
<span id="cb48-8"><a href="conclusion-write-up.html#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_discrete(labels = c(&quot;Divorced&quot;, &quot;Married- Armed Forces&quot;, &quot;Married- Civil Spouse&quot;, &quot;Married- Spouse Absent&quot;, &quot;Never Married&quot;, &quot;Separated&quot;, &quot;Widowed&quot;)) +</span></span>
<span id="cb48-9"><a href="conclusion-write-up.html#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title=</span><span class="st">&quot;Marital Status over Earning Category&quot;</span>, <span class="at">x =</span><span class="st">&quot;Earning Over 50k (0: No, 1: Yes)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Frequency&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Marital Status&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-10"><a href="conclusion-write-up.html#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/Marital%20Chart-1.png" width="672" /></p>
</div>
<div id="final-auroc-chart" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Final AUROC Chart</h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="conclusion-write-up.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions on validation set</span></span>
<span id="cb49-2"><a href="conclusion-write-up.html#cb49-2" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>p_hat <span class="ot">=</span> <span class="fu">predict</span>(logit.model, <span class="at">newdata =</span> test, <span class="at">type =</span> <span class="st">&#39;response&#39;</span>)</span>
<span id="cb49-3"><a href="conclusion-write-up.html#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="conclusion-write-up.html#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate model using AUROC</span></span>
<span id="cb49-5"><a href="conclusion-write-up.html#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plotROC</span>(test<span class="sc">$</span>over_50k, test<span class="sc">$</span>p_hat) <span class="co"># 0.894 AUROC</span></span></code></pre></div>
<p><img src="bookdownproj_files/figure-html/FINAL%20AUROC-1.png" width="672" /></p>
<p><em>This repo was initially generated from a bookdown template available here: <a href="https://github.com/jtr13/bookdown-template" class="uri">https://github.com/jtr13/bookdown-template</a>.</em></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="create-xgboost.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/lclindegaard/RTI-Census-Analysis/edit/master/03-race.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/lclindegaard/RTI-Census-Analysis/blob/master/03-race.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
